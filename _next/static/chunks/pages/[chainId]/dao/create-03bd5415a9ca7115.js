(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1863],{89976:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[chainId]/dao/create",function(){return r(72991)}])},49824:function(e,n,r){"use strict";r.d(n,{s:function(){return f}});var t=r(85893),i=r(43238),s=r(68527),o=r(3797),a=r.n(o),u=r(76822),c=r(59617),l=r(69413),d=r(66606),f=function(e,n,r,o){var f=(0,i.I2)({theme:d.rS,colorMode:"dark"}),h="info"===e?(0,t.jsx)(u.Z,{size:24,weight:"fill"}):(0,t.jsx)(c.Z,{size:24,weight:"fill"});f({duration:5e3,isClosable:!0,position:"top-right",render:function(){return(0,t.jsx)(s.xu,{p:2,bg:"info"===e?"blue.200":"green.200",borderRadius:"lg",h:"100px",w:"300px",textColor:"black",children:(0,t.jsxs)(s.gC,{w:"full",alignItems:"start",children:[(0,t.jsxs)(s.Ug,{children:[(0,t.jsx)(s.xu,{px:2,children:h}),(0,t.jsx)(s.xv,{fontWeight:"semibold",children:n})]}),(0,t.jsxs)(s.gC,{w:"full",alignItems:"start",pl:"12",spacing:"1",children:[(0,t.jsx)(s.xv,{children:"View on ".concat(r.EXPLORER_NAME,":")}),(0,t.jsx)(s.rU,{href:"".concat(r.EXPLORER_ADDRESS,"/tx/").concat(o),isExternal:!0,children:(0,t.jsxs)(s.Ug,{spacing:"1",children:[(0,t.jsx)(s.xv,{fontSize:"14",fontWeight:"semibold",_hover:{textDecor:"underline"},children:(0,l.Xn)(o)}),(0,t.jsx)(a(),{width:"16",height:"16",strokeWidth:3,color:"black"})]})})]})]})})}})}},15125:function(e,n,r){"use strict";r.d(n,{Z:function(){return d}});var t=r(85893),i=r(26723),s=r(68527),o=r(79230),a=r.n(o),u=r(77044),c=r(23351),l=r(97751);function d(e){var n=e.size,r=void 0===n?"md":n,o=e.variant,d=void 0===o?"solid":o,f=e.isFullTitle,h=void 0!==f&&f,x=e.isIcon,m=void 0!==x&&x,v=e.direction,g=void 0===v?"column":v,b=e.message,j=e.children,p=(0,l.TL)(),S=(0,u.Ge)().account,w=function(e){return"xs"===e?{buttonSize:"sm",textSize:"md",w:"25%",iconSize:"16"}:"sm"===e?{buttonSize:e,textSize:"md",w:{base:"70%",md:"40%"},iconSize:"16"}:"md"===e?{buttonSize:e,textSize:"lg",w:{base:"70%",md:"40%"},iconSize:"20"}:"lg"===e?{buttonSize:e,textSize:"xl",w:{base:"70%",md:"40%"},iconSize:"20"}:"xl"===e?{buttonSize:e,textSize:"xl",w:"full",minH:"10",iconSize:"20"}:{buttonSize:"md",textSize:"lg",w:{base:"70%",md:"40%"},iconSize:"20"}}(r);if(S)return(0,t.jsx)(t.Fragment,{children:j});var y=(0,t.jsx)(i.zx,{colorScheme:"blue",alignSelf:"center",size:w.buttonSize,minH:w.minH,variant:d,w:w.w,leftIcon:m?(0,t.jsx)(a(),{width:w.iconSize,height:w.iconSize}):void 0,onClick:function(){p((0,c.G0)())},children:"Connect".concat(h?" Wallet":"")});return b?"row"===g?(0,t.jsxs)(s.Ug,{w:"100%",justify:"space-between",children:[!!b&&(0,t.jsx)(s.xv,{fontSize:w.textSize,children:b}),y]}):(0,t.jsxs)(s.gC,{justify:"center",spacing:b?4:0,children:[!!b&&(0,t.jsx)(s.xv,{textAlign:"center",fontSize:w.textSize,children:b}),y]}):y}},35280:function(e,n,r){"use strict";r.d(n,{Z:function(){return a}});var t=r(85893),i=r(20949),s=r(68527);function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e){var n=e.children,r=e.boxProps,a=e.lightBgColor,u=void 0===a?"gray.50":a,c=e.darkBgColor,l=void 0===c?"#16161E":c,d=(0,i.ff)(u,l);return(0,t.jsx)(s.xu,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){o(e,n,r[n])}))}return e}({bgColor:d,borderRadius:"lg"},r,{children:n}))}},72991:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Q}});var t=r(28520),i=r.n(t),s=r(85893),o=r(26723),a=r(79762),u=r(4612),c=r(36114),l=r(68527),d=r(80918),f=r(19485),h=r(35553),x=r(34871),m=r.n(x),v=r(9944),g=r.n(v),b=r(77044),j=r(49824),p=r(15125),S=r(35280),w=r(54629),y=r(79394),A=r(40129),z=r(26893),I=r(97751),O=r(11163),C=r(23577),D=r(67294),k=r(87536),T=r(77218),P=r(22868),q=r(69413),E=r(10234);function N(e,n,r,t,i,s,o){try{var a=e[s](o),u=a.value}catch(c){return void r(c)}a.done?n(u):Promise.resolve(u).then(t,i)}function _(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function F(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){_(e,n,r[n])}))}return e}function X(e){return function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var R={daoName:"",daoSymbol:"",shares:[],quorum:51};function Q(){var e=(0,b.Ge)(),n=e.account,r=e.chainId,t=e.library,x=(0,I.CG)(y.oM),v=(0,D.useState)(!1),_=v[0],Q=v[1],Z=(0,O.useRouter)(),U=(0,k.cI)({defaultValues:R,mode:"onChange"}),G=U.handleSubmit,L=U.control,M=U.formState.errors,W=U.setValue,H=(0,U.watch)(),V=(0,k.Dq)({name:"shares",control:L}),Y=V.fields,B=V.remove,J=V.append;(0,D.useEffect)((function(){n&&0===Y.length&&J({address:n,amount:"1"})}),[n,J,Y.length]);var K,$=(0,D.useCallback)((function(e){var n=H.shares.filter((function(e){var n=e.address;return(0,f.isAddress)(n)})).reduce((function(e,n){return e+ +n.amount}),0),r=H.shares[e].address,t=+H.shares[e].amount;return n&&(0,f.isAddress)(r)?(t/n*100).toFixed(1)+"%":"0%"}),[H]),ee=(0,I.TL)(),ne=(K=i().mark((function e(r){var s,o,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q(!0),s=r.shares.filter((function(e){var n=e.address,r=e.amount;return(0,f.isAddress)(n)&&+r>0})),!t){e.next=29;break}return e.prev=3,e.next=6,T._S.connect(x.FACTORY_ADDRESS,t.getSigner()).create(r.daoName,r.daoSymbol,+r.quorum,s.map((function(e){return e.address})),s.map((function(e){var n=e.amount;return(0,h.parseEther)(n.toString())})));case 6:return o=e.sent,(0,j.s)("info","Tx Started",x,o.hash),e.next=10,o.wait();case 10:if(!(a=e.sent).events){e.next=20;break}return u=a.events[0].address,(0,E.C)("success","DAO Address is ".concat(u)),e.next=16,Z.push("/".concat(x.CHAIN_ID,"/dao/").concat(u));case 16:ee((0,z.Iq)({network:x,userAddress:n})),ee((0,A.j1)(x)),e.next=21;break;case 20:(0,E.C)("error","DAO address not received");case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),i=e.t0,(null!=(c=Error)&&"undefined"!==typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](i):i instanceof c)?(0,E.C)("error",e.t0.message):(0,E.C)("error",e.t0);case 26:return e.prev=26,Q(!1),e.finish(26);case 29:case"end":return e.stop()}var i,c}),e,null,[[3,23,26,29]])})),function(){var e=this,n=arguments;return new Promise((function(r,t){var i=K.apply(e,n);function s(e){N(i,r,t,s,o,"next",e)}function o(e){N(i,r,t,s,o,"throw",e)}s(void 0)}))});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.X6,{children:"Create a DAO"}),(0,s.jsx)(l.xv,{fontWeight:"medium",children:"Choose a name and symbol for the DAO, GT will get the same parameters. Distribute GT between addresses that will participate in voting"}),(0,s.jsx)(l.gC,{mt:"12",children:(0,s.jsx)(p.Z,{size:"lg",isIcon:!0,isFullTitle:!0,children:(0,s.jsx)(l.xu,{w:"full",children:(0,s.jsx)(k.RV,F({},U,{children:(0,s.jsxs)("form",{id:"create-proposal",onSubmit:G(ne),children:[(0,s.jsxs)(l.Kq,{spacing:"4",w:"full",children:[(0,s.jsx)(l.X6,{fontSize:"lg",children:"Name your DAO"}),(0,s.jsxs)(a.NI,{isInvalid:!!M.daoName,children:[(0,s.jsx)(a.lX,{fontSize:"sm",children:"DAO Name"}),(0,s.jsx)(k.Qr,{name:"daoName",control:L,render:function(e){var n=e.field;return(0,s.jsx)(u.II,F({},n,{onChange:function(e){var r;n.onChange(e.currentTarget.value),r=e.currentTarget.value,W("daoSymbol",(0,q.Yy)(r),{shouldValidate:!0,shouldDirty:!0})}}))},rules:{required:P.dh,maxLength:{value:32,message:"DAO name is too big"}}}),M.daoName?(0,s.jsx)(a.J1,{fontSize:"xs",children:M.daoName.message}):(0,s.jsx)(a.Q6,{fontSize:"xs",children:"DAO name"})]}),(0,s.jsxs)(a.NI,{isInvalid:!!M.daoSymbol,children:[(0,s.jsx)(a.lX,{fontSize:"sm",children:"DAO Symbol"}),(0,s.jsx)(k.Qr,{name:"daoSymbol",control:L,render:function(e){var n=e.field;return(0,s.jsx)(u.II,F({},n))},rules:{required:P.dh,maxLength:{value:32,message:"DAO symbol is too big"}}}),M.daoSymbol?(0,s.jsx)(a.J1,{fontSize:"xs",children:M.daoSymbol.message}):(0,s.jsx)(a.Q6,{fontSize:"xs",children:"DAO symbol"})]})]}),(0,s.jsxs)(l.Kq,{spacing:"4",pt:12,children:[(0,s.jsx)(l.X6,{fontSize:"lg",children:"Set up Partners & Shares"}),(0,s.jsx)(l.Kq,{spacing:"4",divider:(0,s.jsx)(l.cX,{borderColor:(0,I.fX)()}),children:Y.map((function(e,n){var r,t;return(0,s.jsxs)(D.Fragment,{children:[(0,s.jsxs)(a.NI,{isInvalid:!!M.shares&&!!M.shares[n],children:[(0,s.jsx)(a.lX,{htmlFor:"shares.".concat(n,".address"),fontSize:"sm",children:"Partner Address"}),(0,s.jsxs)(l.Ug,{children:[(0,s.jsx)(k.Qr,{render:function(e){var n=e.field;return(0,s.jsx)(u.II,F({},n))},name:"shares.".concat(n,".address"),control:L,rules:{required:P.dh,validate:{isCorrectAddress:P.V9,isDuplicateAddress:(0,P.FB)(H.shares.reduce((function(e,r,t){return n===t?e:X(e).concat([r.address])}),[]))}}}),Y.length>1&&(0,s.jsx)(o.hU,{icon:(0,s.jsx)(g(),{width:"20",height:"20"}),"aria-label":"Remove Partner",onClick:function(){return B(n)},colorScheme:"red",mt:"auto"})]}),M.shares&&M.shares[n]&&(0,s.jsx)(a.J1,{fontSize:"xs",children:null===(r=M.shares[n].address)||void 0===r?void 0:r.message})]}),(0,s.jsx)(l.kC,{experimental_spaceX:"2",mt:"2",children:(0,s.jsxs)(a.NI,{isInvalid:!!M.shares&&!!M.shares[n],children:[(0,s.jsx)(a.lX,{htmlFor:"shares.".concat(n,".amount"),fontSize:"sm",children:"GT Amount"}),(0,s.jsxs)(l.Ug,{children:[(0,s.jsx)(k.Qr,{render:function(e){var n=e.field;return(0,s.jsx)(u.II,F({type:"number",w:"100%",min:1},n))},name:"shares.".concat(n,".amount"),control:L,rules:{required:P.dh,validate:{validateGreaterThanZero:P.Ty}}}),(0,s.jsx)(S.Z,{children:(0,s.jsx)(l.kC,{px:3,h:"40px",align:"center",fontWeight:"medium",children:$(n)})})]}),M.shares&&M.shares[n]&&(0,s.jsx)(a.J1,{fontSize:"xs",children:null===(t=M.shares[n].amount)||void 0===t?void 0:t.message})]})})]},n)}))}),(0,s.jsx)(o.zx,{colorScheme:"blue",onClick:function(){return J({address:"",amount:"1"})},variant:"outline",leftIcon:(0,s.jsx)(m(),{width:"20",height:"20"}),children:"Add Partner"})]}),(0,s.jsxs)(l.Kq,{spacing:"4",pt:12,children:[(0,s.jsx)(l.X6,{fontSize:"lg",children:"Set up a Quorum"}),(0,s.jsxs)(a.NI,{isInvalid:!!M.quorum,children:[(0,s.jsx)(a.lX,{fontSize:"sm",children:"Quorum"}),(0,s.jsxs)(l.Ug,{w:"full",spacing:6,children:[(0,s.jsx)(k.Qr,{render:function(e){var n=e.field;return(0,s.jsxs)(c.Y2,F({maxW:"100px",min:1,max:100},n,{pattern:"[0-9]*",children:[(0,s.jsx)(c.zu,{}),(0,s.jsxs)(c.Fi,{children:[(0,s.jsx)(c.WQ,{}),(0,s.jsx)(c.Y_,{})]})]}))},name:"quorum",control:L,rules:{required:P.dh,validate:{special:function(e){return!!Number.isInteger(+e)||"Quorum must be Integer"}}}}),(0,s.jsx)(k.Qr,{render:function(e){var n=e.field;return(0,s.jsxs)(d.iR,F({focusThumbOnChange:!1,min:1,max:100},n,{children:[(0,s.jsx)(d.Uj,{sx:{"& > div":{background:"linear-gradient(90deg, #20BDFF 0%, #005EFF 100%)"}},children:(0,s.jsx)(d.Ms,{})}),(0,s.jsx)(d.gs,{boxSize:"6",border:"4px",borderColor:"#005EFF"})]}))},name:"quorum",control:L})]}),M.quorum&&(0,s.jsx)(a.J1,{fontSize:"xs",children:M.quorum.message})]})]}),(0,s.jsxs)(l.gC,{pt:12,children:[(0,s.jsx)(o.zx,{colorScheme:"blue",isLoading:_,loadingText:"Creating",isDisabled:x.CHAIN_ID!==r||Object.keys(M).length>0,type:"submit",size:"lg",w:"full",alignSelf:"center",leftIcon:(0,s.jsx)(C.Z,{size:"20",weight:"fill"}),children:"Create a DAO"}),n&&x.CHAIN_ID!==r&&(0,s.jsxs)(l.gC,{pt:"2",w:"full",children:[(0,s.jsx)(w.Z,{size:"lg",width:"full"}),(0,s.jsx)(l.xv,{textColor:"red.600",fontSize:"small",children:"Your wallet chain and XDAO app chain are not the same"})]})]})]})}))})})})]})}},22868:function(e,n,r){"use strict";r.d(n,{xe:function(){return m},dh:function(){return v},Tn:function(){return b},iQ:function(){return j},Ic:function(){return p},Oy:function(){return S},Ty:function(){return w},RP:function(){return y},kt:function(){return A},LD:function(){return z},nv:function(){return I},uP:function(){return O},V9:function(){return C},Pr:function(){return D},DR:function(){return T},qD:function(){return P},l1:function(){return q},Db:function(){return E},XD:function(){return N},FB:function(){return _},h_:function(){return F}});var t=r(28520),i=r.n(t),s=r(19485),o=r(35553),a=r(9279),u=r(77218),c=r(69413),l=r(90845),d=r(8385);function f(e,n,r,t,i,s,o){try{var a=e[s](o),u=a.value}catch(c){return void r(c)}a.done?n(u):Promise.resolve(u).then(t,i)}function h(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var s=e.apply(n,r);function o(e){f(s,t,i,o,a,"next",e)}function a(e){f(s,t,i,o,a,"throw",e)}o(void 0)}))}}function x(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done)&&(r.push(o.value),!n||r.length!==n);t=!0);}catch(u){i=!0,s=u}finally{try{t||null==a.return||a.return()}finally{if(i)throw s}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var m={invalidAddress:"Invalid Address",required:"This is required",maxLength64:"Max 64 symbols",maxLenght2048:"Max 2048 symbols",rangeFrom1To100:"Must be range from 1 to 100",sameQuorum:"New quorum value cannot be the same as the old one",noTokenAddress:"There is no token on this address",validateGreaterThanZero:"Must be greater than 0",greaterThanOrEqualZero:"Must be equal or greater than 0",daoAddress:"You can't use DAO address"},v="This is required",g=function(e){return!!e&&!isNaN(+e)},b=function(e){return!!e&&e===a.d},j=function(e){return!!e&&(0,s.isAddress)(e)&&!b(e)},p=function(e){return!!e&&g(e)&&+e>0},S=function(e){return!!e&&g(e)&&+e>=0},w=function(e){return p(e)||m.validateGreaterThanZero},y=function(e){return S(e)||m.greaterThanOrEqualZero},A=function(e,n){return function(r){return r&&+r>=e&&+r<=n||"Must be range from ".concat(e," to ").concat(n)}},z=function(e,n){var r=void 0===n?"Date can't be in past":n;return function(n){return!(n&&n<e)||r}},I=function(e,n){return function(r){return!!(r&&r>e)||n}},O=function(e){return(0,s.isAddress)(e)||m.invalidAddress},C=function(e){return j(e)||m.invalidAddress},D=function(e,n){return function(r){var t=r.title;if(n){var i=r[n];if((0,d.HD)(i))return e(i)}return e(t)}},k=h(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,s.isAddress)(n)){e.next=5;break}return r=!0,e.next=4,u.Pl.connect(n,(0,l.A)()).symbol().catch((function(){return r=!1}));case 4:return e.abrupt("return",r);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)}))),T=h(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(n);case 2:return r=e.sent,e.abrupt("return",r||m.noTokenAddress);case 4:case"end":return e.stop()}}),e)}))),P=h(i().mark((function e(n){var r,t,s,a,c,d,f,h,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.amount,t=n.currencyAddress,s=n.account,a=n.symbol,!s){e.next=14;break}return e.t0=x,e.next=5,Promise.all([u.Pl.connect(t,(0,l.A)()).decimals(),u.BO.connect(t,(0,l.A)()).balanceOf(s)]);case 5:if(e.t1=e.sent,c=(0,e.t0)(e.t1,2),d=c[0],f=c[1],h=f.gte((0,o.parseUnits)(r,d)),m=(0,o.formatUnits)(f,d),!h){e.next=13;break}return e.abrupt("return",void 0);case 13:return e.abrupt("return","Low balance. Current balance is ".concat(m," ").concat(a));case 14:return e.abrupt("return","User account undefined");case 15:case"end":return e.stop()}}),e)}))),q=h(i().mark((function e(n){var r,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.address,t=n.chainId,e.t0=(0,s.isAddress)(r),!e.t0){e.next=6;break}return e.next=5,u._S.connect((0,c.GW)(t).FACTORY_ADDRESS,(0,l.A)()).containsDao(r);case 5:e.t0=e.sent;case 6:if(!e.t0){e.next=8;break}return e.abrupt("return",m.daoAddress);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)}))),E=function(e){var n=e.split("/");if(3!==n.length)return!1;if(2!==n[0].length||2!==n[1].length||4!==n[2].length)return!1;var r=+n[0],t=+n[1],i=+n[2];if(!r||!t||!i)return!1;if(r<=0||t<=0||i<=0)return!1;if(t>12)return!1;if(i>3e3)return!1;var s=[31,28,31,30,31,30,31,31,30,31,30,31];return i%4===0&&i%100!==0&&(s[1]=29),!(r>s[t-1])},N=function(e){var n=e.split(":");if(2!==n.length)return!1;if(2!==n[0].length||2!==n[1].length)return!1;var r=+n[0],t=+n[1];return!!(0===t||0===r||r&&t)&&(!(r<0||t<0)&&(!(r>24)&&!(t>59)))},_=function(e){return function(n){return!function(e){return function(n){return!!e.find((function(e){return e===n}))}}(e)(n)||"This element added already"}},F=function(e){return function(n){return+e>=+n||"Amount exceeds balance"}}}},function(e){e.O(0,[4612,7536,6728,9774,2888,179],(function(){return n=89976,e(e.s=n);var n}));var n=e.O();_N_E=n}]);